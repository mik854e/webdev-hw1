{% extends 'layout.server.view.html' %}

{% block content %}

<div>
	<h2>{{customer.firstName}} {{customer.lastName}}</h2>
  <ul>
      <li><b>Email: </b>{{customer.email}}</li>
      <li><b>Phone Number: </b>{{customer.phoneNumber}}</li>
  </ul>
</div>

<div>
  <h3>New Contact</h3>
    <form name="contactForm" action="/agents/{{agentID}}/customers/{{customer._id.toString()}}/contacts/add" method="post">
      <fieldset>
        <div class="form-group">
          <div class="form-group">
            <label for="contactType">Communication Type</label>
            <input type="text" id="contactType" name="contactType" required>
          </div>

          <div class="form-group">
            <label for="summary">Summary</label>
            <textarea name="summary" id="summary" rows="4" cols="50" required></textarea>
          </div>            
        </div>
        <div class="text-center form-group">
          <button type="submit" class="btn btn-large btn-primary">Save</button>
        </div>
      </fieldset>
    </form>
</div>

<h3>Contact History</h3>
  <table style='width=50%' cellspacing="20">
        <col width="130">
        <col width="250">
        <col width="500">
      <tr>
        <th>Time</th>
        <th>Communication Type</th> 
        <th>Summary</th>
      </tr>
      {% for contact in contactHistory %}
      <tr>
        <td>{{contact.timestamp.toString()}}</td>
        <td>{{contact.contactType}}</td> 
        <td>{{contact.summary}}</td>
      </tr>
      {% endfor %}
  </table>

{% endblock %}