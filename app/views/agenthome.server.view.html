{% extends 'layout.server.view.html' %}

{% block content %}

<div>
  <h2>
      <a href='/agents/{{agent._id.toString()}}'>{{agent.firstName}} {{agent.lastName}}</a>
  </h2>

  <p>
    <a class="button" href='/agents/{{agent._id.toString()}}/update'>Update Contact Info</a>
    | <a class="button" href='/agents/{{agent._id.toString()}}/delete'>Delete</a>
  </p>

  <div class="panel panel-default">
    <div class="panel-heading"><b>My Customers</b></div>
    <table class="table table-hover">
      <tr>
        <th>Name</th>
        <th>Email</th> 
        <th>Phone Number</th>
      </tr>

      {% for customer in customers %}
      <tr>
        <td><a href='/agents/{{agent._id.toString()}}/customers/{{customer._id.toString()}}'>{{customer.firstName}} {{customer.lastName}}</a></td>
        <td>{{customer.email}}</td> 
        <td>{{customer.phoneNumber}}</td>
      </tr>
      {% endfor %}
    </table>
  </div>

  <nav>
  <ul class="pager">
    <form class="navbar-form navbar-left" action='/agents/{{agent._id.toString()}}/customers/search' method="post">
      <div class="form-group">
        <input type="text" id="query" name="query" class="form-control" placeholder="Search">
      </div>
      <button type="submit"  class="btn btn-default">Submit</button>
    </form>
    <li><a href="{{prev_page}}">Previous</a></li>
    <li><a href="{{next_page}}">Next</a></li>
  </ul>
</nav>

<div>
  <form name="newCustomerForm" action="/agents/{{agent._id.toString()}}/customers/add" method="post">
    <fieldset>
      <h3>Add a New Customer: </h3>
      <div class="form-group">
        <label for="firstName">First Name: </label>
        <input class="form-control" type="text" id="firstName" name="firstName" required>
      </div>
      <div class="form-group">
        <label for="firstName">Last Name: </label>
        <input class="form-control" type="text" id="lastName" name="lastName" required>
      </div>
       <div class="form-group">
        <label for="email">Email: </label>
        <input class="form-control" type="text" id="email" name="email" required>
      </div>
      <div class="form-group">
        <label for="phoneNumber">Phone: </label>
        <input class="form-control" type="text" id="phoneNumber" name="phoneNumber" required>
      </div>
      <div class="form-group">
        <label for="street">Street</label>
        <input class="form-control" type="text" id="street" name="street" required>
      </div>
      <div class="form-group">
        <label for="city">City</label>
        <input class="form-control" type="text" id="city" name="city" required>
      </div>
      <div class="form-group">
        <label for="zip">Zip</label>
        <input class="form-control" type="text" id="zip" name="zip" required>
      </div>
      <div class="form-group">
        <label for="state">State</label>
        <input class="form-control" type="text" id="state" name="state" required>
      </div>
      <div class="form-group">
        <label for="password">Password: </label>
        <input type="password" class="form-control" id="password" name="password" required>
      </div>

      <div class="form-group">
        <button class="btn btn-default" type="submit">Add Customer</button>
      </div>
    </fieldset>
  </form>
</div>


{% endblock %}
